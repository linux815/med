<?php include_once('include/Controller/Controller.php');include_once('include/class_user.php');include_once 'include/functions.php';//// Базовый класс насследуемый от контроллера//abstract class C_Base extends Controller{	protected $title;		// ��������� ��������	protected $content;		// ���������� ��������	protected $id_article;	protected $id_forums;	protected $id_posts;	protected $msg_count;	private $check;	//	// �����������.	//	function __construct()	{		session_start();			}		//	// ����������� ���������� �������.	//	protected function OnInput()	{		$this->title = '�����';		$this->id_article = 'null';		$this->id_forums = 'null';		$this->id_threads = 'null';		$this->id_posts = 'null';		$this->content = '';				$mUsers = M_Users::Instance();				// ������� ������ ������.		$mUsers->ClearSessions();				// ������� ������������.		$this->user = $mUsers->Get();			    if (isset($_POST['find']))
	    {	    	if ($_POST['field'] == "date") 	    		header('Location: index.php?c=find&w='.$_GET['c'].'&q='.Convert($_POST['find_text']).'&f='.$_POST['field']);	    	elseif ($_POST['field'] == "dateyvki")				header('Location: index.php?c=find&w='.$_GET['c'].'&q='.Convert($_POST['find_text']).'&f='.$_POST['field']);			elseif ($_POST['field'] == "datecontroly")				header('Location: index.php?c=find&w='.$_GET['c'].'&q='.Convert($_POST['find_text']).'&f='.$_POST['field']);			else		
	    	header('Location: index.php?c=find&w='.$_GET['c'].'&q='.$_POST['find_text'].'&f='.$_POST['field']);
	    	die();
	    }	    	    if ($this->check['count'] == 0)	    	$this->msg_count = "";	    else 			$this->msg_count = "(".$this->check['count'].")";	}		//	// ����������� ��������� HTML.	//		protected function OnOutput()	{		$vars = array('title' => $this->title, 'content' => $this->content, 'id_article' => $this->id_article, 'msg_count' => $this->msg_count, 'id_forums' => $this->id_forums, 'id_thread' => $this->id_threads, 'id_posts' => $this->id_posts, 'user' => $this->user);			$page = $this->Template('templates/v_main.php', $vars);						echo $page;	}	}